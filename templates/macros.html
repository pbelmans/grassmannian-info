{% macro dynkin(T, n, height=20, k=[]) %}
<svg height="{{ height }}" id="dynkin-{{ T }}{{ n}}" viewBox="-10 -10 {% if T == "D" %}{{ n * 20 - 20 }}{% elif T in ["D", "E"] %}{{ n * 20 - 10 }}{% else %}{{ n * 20 }}{% endif %} 40">
  <g style="stroke-width:0.8; stroke-linejoin:bevel; stroke-linecap:butt; stroke:black; fill:white">
    {% if T == "A" %}
      <polyline points="0,10 {{ (n - 1) * 20 }},10" />
      {% for i in range(n) %}
        <circle cx="{{ i * 20 }}" cy="10" r="5" data-label="A{{ n }}-{{ i + 1 }}" {% if i + 1 in k %}class="active"{% endif %} />
        <!--<text x="{{ i * 20 - 5 }}" y="10">{{ i + 1 }}</text>-->
      {% endfor %}
    {% elif T == "B" %}
      <polyline points="{{ (n - 2) * 20 + 7 }},17 {{ (n - 2) * 20 + 13 }},10 {{ (n - 2) * 20 + 7 }},3" />
      <polyline points="0,10 {{ (n - 2) * 20 }},10" />
      <polyline points="{{ (n - 2) * 20 }},8 {{ (n - 1) * 20 }},8" />
      <polyline points="{{ (n - 2) * 20 }},12 {{ (n - 1) * 20 }},12" />
      {% for i in range(n) %}<circle cx="{{ i * 20 }}" cy="10" r="5" data-label="B{{ n }}-{{ i + 1 }}" {% if i + 1 in k %}class="active"{% endif %} />{% endfor %}
    {% elif T == "C" %}
      <polyline points="{{ (n - 2) * 20 + 13 }},17 {{ (n - 2) * 20 + 7 }},10 {{ (n - 2) * 20 + 13 }},3" />
      <polyline points="0,10 {{ (n - 2) * 20 }},10" />
      <polyline points="0,10 {{ (n - 2) * 20 }},10" />
      <polyline points="{{ (n - 2) * 20 }},8 {{ (n - 1) * 20 }},8" />
      <polyline points="{{ (n - 2) * 20 }},12 {{ (n - 1) * 20 }},12" />
      {% for i in range(n) %}<circle cx="{{ i * 20 }}" cy="10" r="5" data-label="C{{ n }}-{{ i + 1 }}" {% if i + 1 in k %}class="active"{% endif %} />{% endfor %}
    {% elif T == "D" %}
      <polyline points="0,10 {{ (n - 3) * 20 }},10" />
      <polyline points="{{ (n - 3) * 20 }},10 {{ (n - 2) * 20 }},0" />
      <polyline points="{{ (n - 3) * 20 }},10 {{ (n - 2) * 20 }},20" />
      {% for i in range(n - 2) %}<circle cx="{{ i * 20 }}" cy="10" r="5" data-label="D{{ n }}-{{ i + 1 }}" {% if i + 1 in k %}class="active"{% endif %} />{% endfor %}
      <circle cx="{{ (n - 2) * 20 }}" cy="0" r="5" data-label="D{{ n }}-{{ n - 1 }}"  {% if n - 1 in k %}class="active"%{% endif %}/>
      <circle cx="{{ (n - 2) * 20 }}" cy="20" r="5" data-label="D{{ n }}-{{ n }}" {% if n in k %}class="active"%{% endif %}/>
    {% elif T == "E" %}
      <polyline points="0,20 {{ (n - 2) * 20 }},20" />
      <polyline points="40,20 40,0" />
      <circle cx="0" cy="20" r="5" data-label="E{{ n }}-1" {% if 1 in k %}class="active"%{% endif %} />
      {% for i in range(1, n - 1) %}<circle cx="{{ i * 20 }}" cy="20" r="5" data-label="E{{ n }}-{{ i + 2 }}" {% if i + 2 in k %}class="active"{% endif %} />{% endfor %}
      <circle cx="40" cy="0" r="5" data-label="E{{ n }}-2" {% if 2 in k %}class="active"%{% endif %} />
    {% elif T == "F" %}
      <polyline points="27,17 33,10 27,3" />
      <polyline points="0,10 20,10" />
      <polyline points="20,8 40,8" />
      <polyline points="20,12 40,12" />
      <polyline points="40,10 60,10" />
      {% for i in range(n) %}<circle cx="{{ i * 20 }}" cy="10" r="5" data-label="F4-{{ i + 1 }}" {% if i + 1 in k %}class="active"{% endif %} />{% endfor %}
    {% elif T == "G" %}
      <polyline points="13,17 7,10 13,3" />
      <polyline points="0,10 20,10" />
      <polyline points="0,7 20,7" />
      <polyline points="0,13 20,13" />
      {% for i in range(n) %}<circle cx="{{ i * 20 }}" cy="10" r="5" data-label="G2-{{ i + 1 }}" {% if i + 1 in k %}class="active"{% endif %}/>{% endfor %}
    {% endif %}
  </g>
</svg>
{% endmacro %}


{% macro adjoint_group(D) %}
{% set T = D[0] %}
{% set n = D[1:] | int %}

{# we write the adjoint form (per Demazure's article), notation taken from Humphreys, Linear algebraic groups, page 215 #}
{% if T == "A" -%}$\mathrm{PGL}_{ {{ n + 1 }} }$
{%- elif T == "B" -%}$\mathrm{SO}_{Â {{ 2*n + 1 }} }$
{%- elif T == "C" -%}$\mathrm{PSp}_{ {{ 2*n }} }$
{%- elif T == "D" -%}$\mathrm{PSO}_{ {{ 2*n }} }$
{%- elif T == "E" -%}adjoint group of type $\mathrm{E}_{ {{ n }} }$
{%- elif T == "F" -%}$\mathrm{F}_4$
{%- elif T == "G" -%}$\mathrm{G}_2$
{%- endif %}
{% endmacro %}
